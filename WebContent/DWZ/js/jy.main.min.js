var JY=JY||{};JY={Object:{notNull:function(obj){if(obj===null){return false}else{if(obj===undefined){return false}else{if(obj==="undefined"){return false}else{if(obj===""){return false}else{if(obj==="[]"){return false}else{if(obj==="{}"){return false}else{return true}}}}}}},notEmpty:function(obj){if(obj===null){return""}else{if(obj===undefined){return""}else{if(obj==="undefined"){return""}else{if(obj===""){return""}else{if(obj==="[]"){return""}else{if(obj==="{}"){return""}else{return obj}}}}}}},serialize:function(form){var o={};$.each(form.serializeArray(),function(index){if(o[this["name"]]){o[this["name"]]=o[this["name"]]+","+this["value"]}else{o[this["name"]]=this["value"]}});return o},comVar:function(variables){var keys="",values="",types="",vars={};if(variables){$.each(variables,function(){if(keys!=""){keys+=",";values+=",";types+=","}keys+=this.key;values+=this.value;types+=this.type})}vars={keys:keys,values:values,types:types};return vars}},Dict:{setSelect:function(ids,keys,type,dfstr,selected){$.ajax({type:"POST",url:jypath+"/backstage/dataDict/getDictSelect",data:{ids:ids,keys:keys},dataType:"json",success:function(data,textStatus){if(data.res==1){var map=data.obj;var idss=ids.split(",");var opts="",name="";if(type==1){for(var i=0;i<idss.length;i++){name=map[idss[i]].name;opts="<option value=''>请选择</option>";$.each(map[idss[i]].items,function(n,v){opts+="<option value='"+v.value+"'";if(v.name==selected){opts+=" selected='selected'"}opts+=">"+v.name+"</option>"});$("#"+idss[i]+" select").append(opts);$("#"+idss[i]).trigger("liszt:updated")}}else{if(type==2){var dfstrs=dfstr.split(",");for(var i=0;i<idss.length;i++){name=map[idss[i]].name;$("#"+idss[i]+" label").html(name);opts="<option value=''>"+dfstrs+"</option>";$.each(map[idss[i]].items,function(n,v){opts+="<option value='"+v.value+"'>"+v.name+"</option>"});$("#"+idss[i]+" select").append(opts)}}else{if(type==3){for(var i=0;i<idss.length;i++){name=map[idss[i]].name;opts="<option value=''>请选择</option>";$.each(map[idss[i]].items,function(n,v){opts+="<option value='"+v.value+"'";if(v.value==selected){opts+=" selected='selected'"}opts+=">"+v.name+"</option>"});$("#"+idss[i]+" select").append(opts);$("#"+idss[i]).trigger("liszt:updated")}}else{if(type==4){for(var i=0;i<idss.length;i++){name=map[idss[i]].name;opts="<option value=''></option>";$.each(map[idss[i]].items,function(n,v){opts+="<option value='"+v.value+"'";if(v.value==selected){opts+=" selected='selected'"}opts+=">"+v.name+"</option>"});$("#"+idss[i]+" select").append(opts);$("#"+idss[i]).trigger("liszt:updated")}}else{for(var i=0;i<idss.length;i++){var name=map[idss[i]].name;$("#"+idss[i]+" label").html(name);opts="";$.each(map[idss[i]].items,function(n,v){opts+="<option value='"+v.value+"'";if(v.name==selected){opts+=" selected='selected'"}opts+=">"+v.name+"</option>"});$("#"+idss[i]+" select").append(opts)}}}}}}if("ontouchend" in document){$(".chosen-select").removeClass("chosen-select")}else{$(".chosen-select").chosen();$(".chosen-select-deselect").chosen({allow_single_deselect:true})}}})},setSelectuseoption:function(ids,keys,type,dfstr,selected,dkey){$.ajax({type:"POST",url:jypath+"/backstage/dataDict/getDictSelectuseOption",data:{ids:ids,keys:keys,dkey:dkey},dataType:"json",success:function(data,textStatus){if(data.res==1){var map=data.obj;var idss=ids.split(",");var opts="",name="";if(type==1){for(var i=0;i<idss.length;i++){name=map[idss[i]].name;opts="<option value=''>请选择</option>";$.each(map[idss[i]].items,function(n,v){opts+="<option value='"+v.value+"'";if(v.name==selected){opts+=" selected='selected'"}opts+=">"+v.name+"</option>"});$("#"+idss[i]+" select").append(opts);$("#"+idss[i]).trigger("liszt:updated")}}else{if(type==2){var dfstrs=dfstr.split(",");for(var i=0;i<idss.length;i++){name=map[idss[i]].name;$("#"+idss[i]+" label").html(name);opts="<option value=''>"+dfstrs+"</option>";$.each(map[idss[i]].items,function(n,v){opts+="<option value='"+v.value+"'>"+v.name+"</option>"});$("#"+idss[i]+" select").append(opts)}}else{if(type==3){for(var i=0;i<idss.length;i++){name=map[idss[i]].name;opts="<option value=''>请选择</option>";$.each(map[idss[i]].items,function(n,v){opts+="<option value='"+v.value+"'";if(v.value==selected){opts+=" selected='selected'"}opts+=">"+v.name+"</option>"});$("#"+idss[i]+" select").append(opts);$("#"+idss[i]).trigger("liszt:updated")}}else{if(type==4){for(var i=0;i<idss.length;i++){name=map[idss[i]].name;opts="<option value=''></option>";$.each(map[idss[i]].items,function(n,v){opts+="<option value='"+v.value+"'";if(v.value==selected){opts+=" selected='selected'"}opts+=">"+v.name+"</option>"});$("#"+idss[i]+" select").append(opts);$("#"+idss[i]).trigger("liszt:updated")}}else{for(var i=0;i<idss.length;i++){var name=map[idss[i]].name;$("#"+idss[i]+" label").html(name);opts="";$.each(map[idss[i]].items,function(n,v){opts+="<option value='"+v.value+"'";if(v.name==selected){opts+=" selected='selected'"}opts+=">"+v.name+"</option>"});$("#"+idss[i]+" select").append(opts)
}}}}}}if("ontouchend" in document){$(".chosen-select").removeClass("chosen-select")}else{$(".chosen-select").chosen();$(".chosen-select-deselect").chosen({allow_single_deselect:true})}}})}},Page:{jump:function(formId,num,JpFun){$("#"+formId+" .pageNum").val(num);eval(JpFun+"()")},setSize:function(formId,size,JpFun){$("#"+formId+" .pageNum").val(1);$("#"+formId+" .pageSize").val(size);eval(JpFun+"()")},jumpCustom:function(formId,pageId,leng,JpFun){var choseJPage=$("#"+pageId+" .choseJPage").val();if(typeof(choseJPage)=="undefined"){return}else{if(choseJPage==0){choseJPage=1}else{if(choseJPage>leng){choseJPage=leng}}}$("#"+formId+" .pageNum").val(choseJPage);eval(JpFun+"()")},setPage:function(formId,pageId,pagesize,pagenum,totalCount,fun){if(totalCount>0){var pageul=$("#"+pageId+" ul"),html="";pageul.empty();var leng=parseInt((totalCount-1)/pagesize)+1;if(pagenum-1>=1){html+="<li class='prev'><a onclick='JY.Page.jump(&apos;"+formId+"&apos;,1,&apos;"+fun+"&apos;)' href='#'>首页</a></li>";html+="<li class='prev'><a onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+(pagenum-1)+",&apos;"+fun+"&apos;)' href='#'>上页</a></li>"}else{html+="<li class='prev disabled'><a href='##'>首页</a></li>";html+="<li class='prev disabled'><a href='##'>上页</a></li>"}var all=leng>2?2:leng;var start=1;var before=pagenum-parseInt(all/2);if(before>1){start=before}var end=start+all;if(end>leng){end=leng;start=leng>all?(leng-all):1}if(pagenum>2&&leng>3){html+="<li class='' ><a href='#' onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+(pagenum-2)+",&apos;"+fun+"&apos;)' >..</a></li>"}for(var ii=start;ii<=end;ii++){var page=(parseInt(ii));if(pagenum==page){html+="<li class='active' ><a href='#'>"+page+"</a></li>"}else{html+="<li><a onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+ii+",&apos;"+fun+"&apos;)' href='#'>"+page+"</a></li>"}}if(pagenum<=(leng-2)&&leng>3){html+="<li class='' ><a href='#' onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+(pagenum+2)+",&apos;"+fun+"&apos;)' >..</a></li>"}if(pagenum+1<=leng){html+="<li class='next'><a onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+(pagenum+1)+",&apos;"+fun+"&apos;)' href='#'>下页</a></li>";html+="<li class='next'><a onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+leng+",&apos;"+fun+"&apos;)' href='#'>尾页</a></li>"}else{html+="<li class='next disabled'><a href='##'>下页</a></li>";html+="<li class='next disabled'><a href='##'>尾页</i></a></li>"}html+="<li class='disabled'><a href='##'>共"+leng+"页<font color='red'>"+totalCount+"</font>条</a></li>";html+="<li class='next'><input onkeyup='this.value=this.value.replace(/D/g,&apos;&apos;)' type='number' min='1' max='"+leng+"'  placeholder='页码' class='choseJPage' ></li>";html+="<li ><a class='btn btn-mini btn-success' onclick='JY.Page.jumpCustom(&apos;"+formId+"&apos;,&apos;"+pageId+"&apos;,"+leng+",&apos;"+fun+"&apos;);' href='##'>跳转</a></li>";html+="<li class='disabled'><select onchange='JY.Page.setSize(&apos;"+formId+"&apos;,this.value,&apos;"+fun+"&apos;)' style='width:55px;float:left;' title='显示条数'>"+"<option value='5'  "+((pagesize==5)?"selected='selected'":"")+" >5</option>"+"<option value='10' "+((pagesize==10)?"selected='selected'":"")+" >10</option>"+"<option value='15' "+((pagesize==15)?"selected='selected'":"")+" >15</option>"+"</li>";pageul.append(html)}},setPage:function(formId,pageId,pagesize,pagenum,totalCount,fun){if(totalCount>0){var pageul=$("#"+pageId+" ul"),html="";pageul.empty();var leng=parseInt((totalCount-1)/pagesize)+1;if(pagenum-1>=1){html+="<li class='prev'><a onclick='JY.Page.jump(&apos;"+formId+"&apos;,1,&apos;"+fun+"&apos;)' href='#'>首页</a></li>";html+="<li class='prev'><a onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+(pagenum-1)+",&apos;"+fun+"&apos;)' href='#'>上页</a></li>"}else{html+="<li class='prev disabled'><a href='##'>首页</a></li>";html+="<li class='prev disabled'><a href='##'>上页</a></li>"}var all=leng>2?2:leng;var start=1;var before=pagenum-parseInt(all/2);if(before>1){start=before}var end=start+all;if(end>leng){end=leng;start=leng>all?(leng-all):1}if(pagenum>2&&leng>3){html+="<li class='' ><a href='#' onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+(pagenum-2)+",&apos;"+fun+"&apos;)' >..</a></li>"}for(var ii=start;ii<=end;ii++){var page=(parseInt(ii));if(pagenum==page){html+="<li class='active' ><a href='#'>"+page+"</a></li>"}else{html+="<li><a onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+ii+",&apos;"+fun+"&apos;)' href='#'>"+page+"</a></li>"}}if(pagenum<=(leng-2)&&leng>3){html+="<li class='' ><a href='#' onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+(pagenum+2)+",&apos;"+fun+"&apos;)' >..</a></li>"}if(pagenum+1<=leng){html+="<li class='next'><a onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+(pagenum+1)+",&apos;"+fun+"&apos;)' href='#'>下页</a></li>";html+="<li class='next'><a onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+leng+",&apos;"+fun+"&apos;)' href='#'>尾页</a></li>"}else{html+="<li class='next disabled'><a href='##'>下页</a></li>";html+="<li class='next disabled'><a href='##'>尾页</i></a></li>"}html+="<li class='disabled'><a href='##'>共"+leng+"页<font color='red'>"+totalCount+"</font>条</a></li>";
html+="<li class='next'><input onkeyup='this.value=this.value.replace(/D/g,&apos;&apos;)' type='number' min='1' max='"+leng+"'  placeholder='页码' class='choseJPage' ></li>";html+="<li ><a class='btn btn-mini btn-success' onclick='JY.Page.jumpCustom(&apos;"+formId+"&apos;,&apos;"+pageId+"&apos;,"+leng+",&apos;"+fun+"&apos;);' href='##'>跳转</a></li>";html+="<li class='disabled'><select onchange='JY.Page.setSize(&apos;"+formId+"&apos;,this.value,&apos;"+fun+"&apos;)' style='width:55px;float:left;' title='显示条数'>"+"<option value='5'  "+((pagesize==5)?"selected='selected'":"")+" >5</option>"+"<option value='10' "+((pagesize==10)?"selected='selected'":"")+" >10</option>"+"<option value='15' "+((pagesize==15)?"selected='selected'":"")+" >15</option>"+"</li>";pageul.append(html)}},setPagenoselect:function(formId,pageId,pagesize,pagenum,totalCount,fun){if(totalCount>0){var pageul=$("#"+pageId+" ul"),html="";pageul.empty();var leng=parseInt((totalCount-1)/pagesize)+1;if(pagenum-1>=1){html+="<li class='prev'><a onclick='JY.Page.jump(&apos;"+formId+"&apos;,1,&apos;"+fun+"&apos;)' href='#'>首页</a></li>";html+="<li class='prev'><a onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+(pagenum-1)+",&apos;"+fun+"&apos;)' href='#'>上页</a></li>"}else{html+="<li class='prev disabled'><a href='##'>首页</a></li>";html+="<li class='prev disabled'><a href='##'>上页</a></li>"}var all=leng>2?2:leng;var start=1;var before=pagenum-parseInt(all/2);if(before>1){start=before}var end=start+all;if(end>leng){end=leng;start=leng>all?(leng-all):1}if(pagenum>2&&leng>3){html+="<li class='' ><a href='#' onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+(pagenum-2)+",&apos;"+fun+"&apos;)' >..</a></li>"}for(var ii=start;ii<=end;ii++){var page=(parseInt(ii));if(pagenum==page){html+="<li class='active' ><a href='#'>"+page+"</a></li>"}else{html+="<li><a onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+ii+",&apos;"+fun+"&apos;)' href='#'>"+page+"</a></li>"}}if(pagenum<=(leng-2)&&leng>3){html+="<li class='' ><a href='#' onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+(pagenum+2)+",&apos;"+fun+"&apos;)' >..</a></li>"}if(pagenum+1<=leng){html+="<li class='next'><a onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+(pagenum+1)+",&apos;"+fun+"&apos;)' href='#'>下页</a></li>";html+="<li class='next'><a onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+leng+",&apos;"+fun+"&apos;)' href='#'>尾页</a></li>"}else{html+="<li class='next disabled'><a href='##'>下页</a></li>";html+="<li class='next disabled'><a href='##'>尾页</i></a></li>"}html+="<li class='disabled'><a href='##'>共"+leng+"页<font color='red'>"+totalCount+"</font>条</a></li>";html+="<li class='next'><input onkeyup='this.value=this.value.replace(/D/g,&apos;&apos;)' type='number' min='1' max='"+leng+"'  placeholder='页码' class='choseJPage' ></li>";html+="<li ><a class='btn btn-mini btn-success' onclick='JY.Page.jumpCustom(&apos;"+formId+"&apos;,&apos;"+pageId+"&apos;,"+leng+",&apos;"+fun+"&apos;);' href='##'>跳转</a></li>";pageul.append(html)}},setSimPage:function(formId,pageId,pagesize,pagenum,totalCount,fun){if(totalCount>0){var pageul=$("#"+pageId+" ul"),html="";pageul.empty();var leng=parseInt((totalCount-1)/pagesize)+1;if(pagenum-1>=1){html+="<li class='prev'><a onclick='JY.Page.jump(&apos;"+formId+"&apos;,1,&apos;"+fun+"&apos;)' href='#'>首</a></li>"}else{html+="<li class='prev disabled'><a href='##'>首</a></li>"}var all=leng>2?2:leng;var start=1;var before=pagenum-parseInt(all/2);if(before>1){start=before}var end=start+all;if(end>leng){end=leng;start=leng>all?(leng-all):1}if(pagenum>2&&leng>3){html+="<li class='' ><a href='#' onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+(pagenum-2)+",&apos;"+fun+"&apos;)' >..</a></li>"}for(var ii=start;ii<=end;ii++){var page=(parseInt(ii));if(pagenum==page){html+="<li class='active' ><a href='#'>"+page+"</a></li>"}else{html+="<li><a onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+ii+",&apos;"+fun+"&apos;)' href='#'>"+page+"</a></li>"}}if(pagenum<=(leng-2)&&leng>3){html+="<li class='' ><a href='#' onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+(pagenum+2)+",&apos;"+fun+"&apos;)' >..</a></li>"}if(pagenum+1<=leng){html+="<li class='next'><a onclick='JY.Page.jump(&apos;"+formId+"&apos;,"+leng+",&apos;"+fun+"&apos;)' href='#'>尾</a></li>"}else{html+="<li class='next disabled'><a href='##'>尾</i></a></li>"}html+="<li class='disabled'><a href='##'>共"+leng+"页</a></li>";pageul.append(html)}}},Tags:{cleanForm:function(formId){$("#"+formId+" input[type$='text']").val("");$("#"+formId+" textarea").val("")},setFunction:function(id,pBtn){var h="";if(pBtn!=null&&pBtn.length>0){h+="<td class='center'>";h+="<div class='visible-md visible-lg hidden-sm hidden-xs btn-group'>";for(var i=0;i<pBtn.length;i++){h+="<a href='#' title='"+JY.Object.notEmpty(pBtn[i].name)+"' onclick='"+JY.Object.notEmpty(pBtn[i].btnFun)+"(&apos;"+id+"&apos;)' class='aBtnNoTD' ><i class='"+pBtn[i].icon+" bigger-140'></i></a>"}h+="</div>";h+="<div class='visible-xs visible-sm hidden-md hidden-lg'><div class='inline position-relative'>";h+="<button class='btn btn-minier btn-primary dropdown-toggle' data-toggle='dropdown'><i class='icon-cog icon-only bigger-110'></i></button>";
h+="<ul class='dropdown-menu dropdown-only-icon dropdown-yellow pull-right dropdown-caret dropdown-close'>";for(var i=0;i<pBtn.length;i++){h+="<li><a href='#' title='"+JY.Object.notEmpty(pBtn[i].name)+"' onclick='"+JY.Object.notEmpty(pBtn[i].btnFun)+"(&apos;"+id+"&apos;)' class='aBtnNoTD' ><i class='"+pBtn[i].icon+" bigger-140'></i></a></li>"}h+="</ul></div></div>";h+="</td>"}else{h+="<td></td>"}return h},isValid:function(formId,val){$("#"+formId+" .isValidCheckbox [hi-isValid]").val(val);if(val==1){$("#"+formId+" .isValidCheckbox [sh-isValid]").prop("checked",true)}else{$("#"+formId+" .isValidCheckbox [sh-isValid]").prop("checked",false)}}},Model:{loading:function(Str){if(JY.Object.notNull(Str)){$("#jyLoadingStr").empty().append(Str)}else{$("#jyLoadingStr").empty().append("数据读取中...")}$("#jyLoading").removeClass("hide").dialog({dialogClass:"loading-no-close",minHeight:50,resizable:false,modal:true,show:{effect:"fade"},hide:{effect:"fade"}})},loadingClose:function(){$("#jyLoading").dialog("close")},confirm:function(Str,fn){$("#jyConfirmStr").empty();if(JY.Object.notNull(Str)){$("#jyConfirmStr").append(Str)}else{$("#jyConfirmStr").append("确认吗？")}$("#jyConfirm").removeClass("hide").dialog({resizable:false,modal:true,title:"<div class='widget-header'><h4 class='font-bold'>询问</h4></div>",title_html:true,show:{effect:"explode",pieces:9},hide:{effect:"explode",pieces:9},buttons:[{html:"<i class='icon-ok bigger-110'></i>&nbsp;确认","class":"btn btn-primary btn-xs",click:function(){$(this).dialog("close");if(typeof(fn)=="function"){fn.call(this)}}},{html:"<i class='icon-remove bigger-110'></i>&nbsp;取消","class":"btn btn-xs",click:function(){$(this).dialog("close")}}]})},info:function(Str,fn){if(JY.Object.notNull(Str)){$("#jyInfoStr").empty().append(Str);$("#jyInfo").removeClass("hide").dialog({resizable:false,dialogClass:"title-no-close",modal:true,title:"<div class='widget-header'><h4 class='font-bold'>提示</h4></div>",title_html:true,show:{effect:"explode",pieces:9},hide:{effect:"explode",pieces:9},buttons:[{html:"<i class='icon-ok bigger-110'></i>&nbsp;确认","class":"btn btn-primary btn-xs",click:function(){$(this).dialog("close");if(typeof(fn)=="function"){fn.call(this)}}}]})}},error:function(Str){if(JY.Object.notNull(Str)){$("#jyErrorStr").empty().append(Str);$("#jyError").removeClass("hide").dialog({resizable:false,dialogClass:"title-no-close",modal:true,title:"<div class='widget-header'><h4 class='font-bold red'>错误</h4></div>",title_html:true,show:{effect:"shake",duration:100},hide:{effect:"explode"},buttons:[{html:"<i class='icon-ok bigger-110'></i>&nbsp;确认","class":"btn btn-primary btn-xs",click:function(){$(this).dialog("close")}}]})}},check:function(id,title,fn){$("#"+id).removeClass("hide").dialog({resizable:false,modal:true,title:"<div class='widget-header'><h4 class='smaller'>"+(JY.Object.notNull(title)?title:"查看")+"</h4></div>",title_html:true,buttons:[{html:"<i class='icon-remove bigger-110'></i>&nbsp;取消","class":"btn btn-xs",click:function(){$(this).dialog("close");if(typeof(fn)=="function"){fn.call(this)}}}]})},edit:function(id,title,savefn,cancelfn,width){if(width!=""&&width!=null){$("#"+id).removeClass("hide").dialog({resizable:true,width:width,modal:true,title:"<div class='widget-header'><h4 class='smaller'>"+(JY.Object.notNull(title)?title:"修改")+"</h4></div>",title_html:true,buttons:[{html:"<i class='icon-ok bigger-110'></i>&nbsp;保存","class":"btn btn-primary btn-xs",click:function(){if(typeof(savefn)=="function"){savefn.call(this)}}},{html:"<i class='icon-remove bigger-110'></i>&nbsp;取消","class":"btn btn-xs",click:function(){$(this).dialog("close");if(typeof(cancelfn)=="function"){cancelfn.call(this)}}}]})}else{$("#"+id).removeClass("hide").dialog({resizable:false,modal:true,title:"<div class='widget-header'><h4 class='smaller'>"+(JY.Object.notNull(title)?title:"修改")+"</h4></div>",title_html:true,buttons:[{html:"<i class='icon-ok bigger-110'></i>&nbsp;保存","class":"btn btn-primary btn-xs",click:function(){if(typeof(savefn)=="function"){savefn.call(this)}}},{html:"<i class='icon-remove bigger-110'></i>&nbsp;取消","class":"btn btn-xs",click:function(){$(this).dialog("close");if(typeof(cancelfn)=="function"){cancelfn.call(this)}}}]})}},zidinyitanchuang:function(id,title,width,height,savefn,cancelfn){$("#"+id).removeClass("hide").dialog({resizable:true,width:width,height:height,modal:false,title:"<div class='widget-header' style='height:10px;'><h6 class='smaller'>"+(JY.Object.notNull(title)?title:"修改")+"</h6></div>",title_html:true,buttons:[{html:"<i class='icon-ok bigger-110'></i><span id='savebtnstr'>&nbsp;保存<span>","class":"btn btn-primary btn-xs",click:function(){if(typeof(savefn)=="function"){savefn.call(this)}}},{html:"<i class='icon-remove bigger-110'></i>&nbsp;取消","class":"btn btn-xs",click:function(){$(this).dialog("close");if(typeof(cancelfn)=="function"){cancelfn.call(this)}}}]})},modelwithbtnname:function(id,title,width,height,savefn,savebtnstr,cancelfn){$("#"+id).removeClass("hide").dialog({resizable:true,width:width,height:height,modal:false,title:"<div class='widget-header' style='height:10px;'><h6 class='smaller'>"+(JY.Object.notNull(title)?title:"修改")+"</h6></div>",title_html:true,buttons:[{html:"<i class='icon-ok bigger-110'></i>&nbsp;"+savebtnstr+"","class":"btn btn-primary btn-xs",click:function(){if(typeof(savefn)=="function"){savefn.call(this)
}}},{html:"<i class='icon-remove bigger-110'></i>&nbsp;取消","class":"btn btn-xs",click:function(){$(this).dialog("close");if(typeof(cancelfn)=="function"){cancelfn.call(this)}}}]})},modelnosavebtn:function(id,title,width,height,savefn,savebtnstr,cancelfn){$("#"+id).removeClass("hide").dialog({resizable:true,width:width,height:height,modal:false,title:"<div class='widget-header' style='height:10px;'><h6 class='smaller'>"+(JY.Object.notNull(title)?title:"修改")+"</h6></div>",title_html:true,buttons:[{html:"<i class='icon-remove bigger-110'></i>&nbsp;取消","class":"btn btn-xs",click:function(){$(this).dialog("close");if(typeof(cancelfn)=="function"){cancelfn.call(this)}}}]})},audit:function(id,title,savefn,rejectfn,cancelfn){$("#"+id).removeClass("hide").dialog({resizable:false,modal:true,title:"<div class='widget-header'><h4 class='smaller'>"+(JY.Object.notNull(title)?title:"审核")+"</h4></div>",title_html:true,buttons:[{html:"<i class='icon-ok bigger-110'></i>&nbsp;同意","class":"btn btn-primary btn-xs",click:function(){if(typeof(savefn)=="function"){savefn.call(this)}}},{html:"<i class='icon-undo bigger-110'></i>&nbsp;驳回","class":"btn btn-danger btn-xs",click:function(){if(typeof(rejectfn)=="function"){rejectfn.call(this)}}},{html:"<i class='icon-remove bigger-110'></i>&nbsp;取消","class":"btn btn-xs",click:function(){$(this).dialog("close");if(typeof(cancelfn)=="function"){cancelfn.call(this)}}}]})},adjust:function(id,title,againfn,abandonfn,cancelfn){$("#"+id).removeClass("hide").dialog({resizable:false,modal:true,title:"<div class='widget-header'><h4 class='smaller'>"+(JY.Object.notNull(title)?title:"调整")+"</h4></div>",title_html:true,buttons:[{html:"<i class='icon-ok bigger-110'></i>&nbsp;提交","class":"btn btn-primary btn-xs",click:function(){if(typeof(againfn)=="function"){againfn.call(this)}}},{html:"<i class='icon-flag-alt bigger-110'></i>&nbsp;放弃","class":"btn btn-danger btn-xs",click:function(){if(typeof(abandonfn)=="function"){abandonfn.call(this)}}},{html:"<i class='icon-remove bigger-110'></i>&nbsp;取消","class":"btn btn-xs",click:function(){$(this).dialog("close");if(typeof(cancelfn)=="function"){cancelfn.call(this)}}}]})}},Validate:{isEnNum:function(str){if(/^[0-9a-zA-Z]+$/.test(str)){return true}return false},isEn:function(str){if(/^[A-Za-z]+$/.test(str)){return true}return false},isEmail:function(email){if(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(email)){return true}return false},isDate:function(date){if(date.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/)){return true}return false},isDatetime:function(datetime){if(datetime.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/)){return true}return false},numrange:function(v,min,max){v=parseInt(v);min=parseInt(min);max=parseInt(max);if((min<v)&&(v<max)){return true}return false},numrangeth:function(v,min,max){v=parseInt(v);min=parseInt(min);max=parseInt(max);if((min<=v)&&(v<=max)){return true}return false},form:function(fromId,side){var res=true;side=JY.Object.notNull(side)?side:1;$("#"+fromId+" input[jyValidate]").each(function(){if(res==false){return}var that=$(this);var jyValidate=$(this).attr("jyValidate").split(",");$.each(jyValidate,function(n,v){if(res==false){return}if(v=="required"){if(!JY.Object.notNull(that.val())){that.tips({side:side,msg:"必要字段！",bg:"#FF2D2D",time:1});that.focus();res=false}}else{if(v=="email"){if(JY.Object.notNull(that.val())){if(!JY.Validate.isEmail(that.val())){that.tips({side:side,msg:"电子邮箱不正确！",bg:"#FF2D2D",time:1});that.focus();res=false}}}else{if(v=="date"){if(JY.Object.notNull(that.val())){if(!JY.Validate.isDate(that.val())){that.tips({side:side,msg:"日期格式不正确！",bg:"#FF2D2D",time:1});that.focus();res=false}}}else{if(v=="datetime"){if(JY.Object.notNull(that.val())){if(!JY.Validate.isDatetime(that.val())){that.tips({side:side,msg:"日期时间格式不正确！",bg:"#FF2D2D",time:1});that.focus();res=false}}}else{if(v=="numrange"){if(JY.Object.notNull(that.val())){var min=that.attr("min");var max=that.attr("max");if(!JY.Validate.numrange(that.val(),min,max)){that.tips({side:side,msg:"数字范围："+min+"~"+max,bg:"#FF2D2D",time:1});that.focus();res=false}}}else{if(v=="numrangeth"){if(JY.Object.notNull(that.val())){var min=that.attr("min");var max=that.attr("max");if(!JY.Validate.numrangeth(that.val(),min,max)){that.tips({side:side,msg:"数字范围："+min+"~"+max,bg:"#FF2D2D",time:1});that.focus();res=false}}}else{if(v=="en"){if(JY.Object.notNull(that.val())){if(!JY.Validate.isEn(that.val())){that.tips({side:side,msg:"只能输入英文",bg:"#FF2D2D",time:1});that.focus();res=false}}}else{if(v=="ennum"){if(JY.Object.notNull(that.val())){if(!JY.Validate.isEnNum(that.val())){that.tips({side:side,msg:"只能输入英文或数字",bg:"#FF2D2D",time:1});that.focus();res=false}}}}}}}}}}})});return res}},Date:{Default:function(time){return JY.Object.notNull(time)?(new Date(time).Format("yyyy-MM-dd  hh:mm:ss")):" "},Format:function(time,fmt){return JY.Object.notNull(time)?(new Date(time).Format(fmt)):""}},Url:{getParam:function(name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)");
var r=window.location.search.substr(1).match(reg);if(r!=null){return unescape(r[2])}return""}},Ajax:{doRequest:function(form,url,param,fn,async){var params=form||param||{};if(typeof form=="string"){params=$.extend(param||{},JY.Object.serialize($("#"+form)),{menu:JY.Url.getParam("menu")})}if(async==false){$.ajax({type:"POST",url:url,data:params,dataType:"json",async:false,success:function(data,textStatus){if(data.res==1){if(typeof(fn)=="function"){fn.call(this,data)}}else{if(JY.Object.notNull(data.resMsg)){JY.Model.error(data.resMsg)}}},error:function(){return},beforeSend:function(){},complete:function(){}})}else{$.ajax({type:"POST",url:url,data:params,dataType:"json",success:function(data,textStatus){if(data.res==1){if(typeof(fn)=="function"){fn.call(this,data)}}else{if(JY.Object.notNull(data.resMsg)){JY.Model.error(data.resMsg)}}},error:function(){return},beforeSend:function(){},complete:function(){}})}},req:function(form,url,param,fn){var params=form||param||{};if(typeof form=="string"){params=$.extend(param||{},JY.Object.serialize($("#"+form)),{menu:JY.Url.getParam("menu")})}$.ajax({type:"POST",url:url,data:params,dataType:"json",success:function(data,textStatus){if(typeof(fn)=="function"){fn.call(this,data)}},error:function(){return},beforeSend:function(){},complete:function(){}})},synchro:function(form,url,param,fn){var params=form||param||{};if(typeof form=="string"){params=$.extend(param||{},JY.Object.serialize($("#"+form)),{menu:JY.Url.getParam("menu")})}$.ajax({async:false,type:"POST",url:url,data:params,dataType:"json",success:function(data,textStatus){if(data.res==1){if(typeof(fn)=="function"){fn.call(this,data)}}else{if(JY.Object.notNull(data.resMsg)){JY.Model.error(data.resMsg)}}},error:function(){return},beforeSend:function(){},complete:function(){}})}}};Date.prototype.Format=function(fmt){var o={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S":this.getMilliseconds()};if(/(y+)/.test(fmt)){fmt=fmt.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}for(var k in o){if(new RegExp("("+k+")").test(fmt)){fmt=fmt.replace(RegExp.$1,(RegExp.$1.length==1)?(o[k]):(("00"+o[k]).substr((""+o[k]).length)))}}return fmt};function autoheight(t,temp){var winHeight=600;if(window.innerHeight){winHeight=window.innerHeight}else{if((document.body)&&(document.body.clientHeight)){winHeight=document.body.clientHeight}}if(temp!=null&&temp!=""){winHeight+=temp}winHeight=winHeight-30;$("#"+t).css({"height":parseInt(winHeight)})};